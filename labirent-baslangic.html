<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Labirent: BaÅŸlangÄ±Ã§ | BilinÃ§altÄ±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body, html {
      margin: 0;
      overflow: hidden;
      height: 100%;
      background: black;
      font-family: "Poppins", sans-serif;
    }

    #subtitle {
      position: absolute;
      bottom: 12%;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255, 230, 200, 0.9);
      text-align: center;
      font-size: 1.2rem;
      opacity: 0;
      transition: opacity 2s ease;
      text-shadow: 0 0 18px rgba(255, 160, 80, 0.5);
    }

    #fadeWhite {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: white;
      opacity: 0;
      transition: opacity 3s ease;
      pointer-events: none;
    }

    #startText {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-size: 1.4rem;
      text-align: center;
      opacity: 1;
      animation: fadeout 4s ease forwards;
    }

    @keyframes fadeout {
      0% { opacity: 1; }
      90% { opacity: 1; }
      100% { opacity: 0; }
    }
  </style>
</head>
<body>
  <div id="startText">ðŸ’» LÃ¼tfen PC modunda oynayÄ±n</div>
  <div id="subtitle"></div>
  <div id="fadeWhite"></div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
  <script>
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // IÅŸÄ±klar
    const torchLight = new THREE.PointLight(0xffa050, 2.5, 18);
    torchLight.position.set(0, 1.8, 1);
    scene.add(torchLight);
    scene.add(new THREE.AmbientLight(0x20150a, 0.3));

    // Dokular
    const loader = new THREE.TextureLoader();
    const wallTexture = loader.load('https://threejsfundamentals.org/threejs/resources/images/wall.jpg');
    wallTexture.wrapS = wallTexture.wrapT = THREE.RepeatWrapping;
    wallTexture.repeat.set(8, 8);

    const wallMat = new THREE.MeshStandardMaterial({ map: wallTexture });
    const floorMat = new THREE.MeshStandardMaterial({ color: 0x111111 });

    // Koridor yapÄ±sÄ±
    for (let i = 0; i < 25; i++) {
      const wallL = new THREE.Mesh(new THREE.BoxGeometry(8, 6, 0.5), wallMat);
      wallL.position.set(-4, 1, -i * 6);
      scene.add(wallL);

      const wallR = new THREE.Mesh(new THREE.BoxGeometry(8, 6, 0.5), wallMat);
      wallR.position.set(4, 1, -i * 6);
      scene.add(wallR);

      const floor = new THREE.Mesh(new THREE.BoxGeometry(8, 0.2, 6), floorMat);
      floor.position.set(0, -2, -i * 6);
      scene.add(floor);
    }

    // Sis efekti
    scene.fog = new THREE.FogExp2(0x000000, 0.035);

    // Kamera
    camera.position.set(0, 1.5, 5);

    // AltyazÄ± listesi
    const subtitles = [
      "Bu labirente kendi isteÄŸinle girdin...",
      "Her kÃ¶ÅŸede bir yankÄ±, her yankÄ±da bir yÃ¼zleÅŸme...",
      "KoÅŸma. Zaten kendinden kaÃ§amazsÄ±n.",
      "2. perdeye geÃ§iliyor..."
    ];

    const subtitleEl = document.getElementById("subtitle");
    let subIndex = 0;
    let subTimer = 0;
    let subDelay = [3000, 6000, 11000, 16000]; // altyazÄ± sÃ¼releri

    setTimeout(() => showSubtitle(), 4000);

    function showSubtitle() {
      if (subIndex < subtitles.length) {
        subtitleEl.textContent = subtitles[subIndex];
        subtitleEl.style.opacity = 1;
        setTimeout(() => { subtitleEl.style.opacity = 0; subIndex++; showSubtitle(); }, 4000);
      } else {
        // Fade to white, geÃ§iÅŸ
        setTimeout(() => {
          document.getElementById("fadeWhite").style.opacity = 1;
          setTimeout(() => {
            window.location.href = "labirent-02.html";
          }, 3000);
        }, 1000);
      }
    }

    // Hareket deÄŸiÅŸkenleri
    let progress = 0;
    let run = false;
    let turn = false;

    function animate() {
      requestAnimationFrame(animate);
      progress += 0.015;

      // MeÅŸale hareketi
      torchLight.intensity = 2.3 + Math.sin(progress * 4) * 0.3;
      torchLight.position.z = camera.position.z - 0.8;

      // Kamera yÃ¼rÃ¼yÃ¼ÅŸ
      if (progress < 7) camera.position.z -= 0.04;
      if (progress > 7 && !turn) { turn = true; }
      if (turn && progress < 13) camera.rotation.y += 0.002;

      // Kamera koÅŸu
      if (progress > 13 && !run) run = true;
      if (run) {
        camera.position.z -= 0.15;
        camera.rotation.y = Math.sin(progress * 3) * 0.1;
      }

      renderer.render(scene, camera);
    }

    animate();

    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
