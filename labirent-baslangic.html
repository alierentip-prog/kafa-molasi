<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Labirent: Başlangıç | Bilinçaltı</title>
<style>
html,body {
  margin:0;
  height:100%;
  overflow:hidden;
  background:black;
  font-family:"Poppins",sans-serif;
  color:#f5e6d0;
}
#subtitle {
  position:absolute;
  bottom:10%;
  width:100%;
  text-align:center;
  font-size:1.3rem;
  opacity:0;
  transition:opacity 2s ease;
  text-shadow:0 0 20px rgba(255,180,100,0.7);
}
#fadeWhite {
  position:absolute;
  top:0;left:0;
  width:100%;height:100%;
  background:white;
  opacity:0;
  transition:opacity 3s ease;
}
canvas{display:block;}
</style>
</head>
<body>
<div id="subtitle"></div>
<div id="fadeWhite"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script>
// === SAHNE OLUŞTUR ===
const scene=new THREE.Scene();
const camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
document.body.appendChild(renderer.domElement);

// === IŞIKLAR ===
const torch=new THREE.PointLight(0xffa050,2.5,15);
torch.position.set(0,1.5,0);
scene.add(torch);
scene.add(new THREE.AmbientLight(0x120a05,0.3));

// === SİS & PARTİKÜLLER ===
scene.fog=new THREE.FogExp2(0x000000,0.035);
const particleGeo=new THREE.BufferGeometry();
const particleCount=250;
const positions=[];
for(let i=0;i<particleCount;i++){
  positions.push((Math.random()-0.5)*20,(Math.random()-0.2)*8,(Math.random()-1)*200);
}
particleGeo.setAttribute('position',new THREE.Float32BufferAttribute(positions,3));
const particleMat=new THREE.PointsMaterial({color:0xffe0b0,size:0.05,transparent:true,opacity:0.6});
const particles=new THREE.Points(particleGeo,particleMat);
scene.add(particles);

// === DUVARLAR & ZEMİN ===
const loader=new THREE.TextureLoader();
const wallTex=loader.load("https://threejsfundamentals.org/threejs/resources/images/wall.jpg");
wallTex.wrapS=wallTex.wrapT=THREE.RepeatWrapping;
wallTex.repeat.set(6,6);
const wallMat=new THREE.MeshStandardMaterial({map:wallTex,roughness:0.8,metalness:0.1});
const floorMat=new THREE.MeshStandardMaterial({color:0x0c0c0c});

for(let z=0;z<180;z+=6){
  const leftWall=new THREE.Mesh(new THREE.BoxGeometry(10,6,0.4),wallMat);
  leftWall.position.set(-5,0,-z);
  scene.add(leftWall);
  const rightWall=new THREE.Mesh(new THREE.BoxGeometry(10,6,0.4),wallMat);
  rightWall.position.set(5,0,-z);
  scene.add(rightWall);
  const floor=new THREE.Mesh(new THREE.BoxGeometry(10,0.2,6),floorMat);
  floor.position.set(0,-3,-z);
  scene.add(floor);
}

// === KAMERA ===
camera.position.set(0,0.5,3);

// === ALTYAZILAR ===
const subs=[
  "Karanlık... sadece gözlerini değil, zihnini de sarıyor.",
  "Bir ses... yankı mı, yoksa hatırladığın bir nefes mi?",
  "Bu koridor, adımlarının hikayesini biliyor.",
  "Koşma... Zaten senden kaçamazsın.",
  "Bilinçaltının kapısı şimdi açılıyor."
];
const subtitle=document.getElementById("subtitle");
let s=0;

function showNextSub(){
  if(s<subs.length){
    subtitle.textContent=subs[s];
    subtitle.style.opacity=1;
    setTimeout(()=>{subtitle.style.opacity=0;s++;setTimeout(showNextSub,2500);},4000);
  } else {
    fadeToWhite();
  }
}
setTimeout(showNextSub,2000);

// === GEÇİŞ ===
const fadeWhite=document.getElementById("fadeWhite");
function fadeToWhite(){
  fadeWhite.style.opacity=1;
  setTimeout(()=>window.location.href="labirent-02.html",3500);
}

// === HAREKETLER ===
let t=0,run=false;
function animate(){
  requestAnimationFrame(animate);
  t+=0.015;
  particles.rotation.y+=0.0005;

  // Meşale titremesi
  torch.intensity=2.5+Math.sin(t*8)*0.2;
  torch.position.x=Math.sin(t*2)*0.3;
  torch.position.z=camera.position.z-1;

  // Yavaş yürüyüş
  if(t<10) camera.position.z-=0.04;
  // Koşu modu
  if(t>10) run=true;
  if(run){
    camera.position.z-=0.18;
    camera.rotation.y=Math.sin(t*3)*0.05;
    camera.rotation.x=Math.sin(t*6)*0.02;
  }

  renderer.render(scene,camera);
}
animate();

window.addEventListener("resize",()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>
