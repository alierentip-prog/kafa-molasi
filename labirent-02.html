<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Labirent 02 | Se√ßim Anƒ±</title>
<style>
html,body{margin:0;height:100%;overflow:hidden;background:black;}
#subtitle{
  position:absolute;bottom:10%;width:100%;text-align:center;
  color:#e8e0d0;font-family:"Poppins",sans-serif;
  font-size:1.2rem;opacity:0;transition:opacity 2s ease;
  text-shadow:0 0 18px rgba(255,200,120,0.8);
}
.choice {
  position:absolute;bottom:25%;width:100%;text-align:center;
  opacity:0;transition:opacity 1.5s ease;
}
button {
  background:rgba(255,255,255,0.1);
  border:1px solid rgba(255,255,255,0.3);
  color:#f5e6d0;font-family:"Poppins",sans-serif;
  font-size:1rem;padding:10px 20px;border-radius:10px;
  margin:0 10px;cursor:pointer;backdrop-filter:blur(3px);
  transition:background 0.3s ease;
}
button:hover {background:rgba(255,255,255,0.3);}
#fadeWhite{
  position:absolute;top:0;left:0;width:100%;height:100%;
  background:white;opacity:0;transition:opacity 3s ease;
}
</style>
</head>
<body>
<div id="subtitle"></div>
<div id="fadeWhite"></div>
<div class="choice" id="choices">
  <button id="leftBtn">üå´Ô∏è Sola Git</button>
  <button id="rightBtn">üî• Saƒüa Git</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script>
// === SAHNE ===
const scene=new THREE.Scene();
scene.fog=new THREE.FogExp2(0x000000,0.04);
const camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

// === DOKULAR ===
const loader=new THREE.TextureLoader();
const stone=loader.load("https://i.imgur.com/X7WJ5dq.jpeg");
stone.wrapS=stone.wrapT=THREE.RepeatWrapping;
const floorTex=loader.load("https://i.imgur.com/aBkx8qM.jpeg");
floorTex.wrapS=floorTex.wrapT=THREE.RepeatWrapping;
const wallMat=new THREE.MeshStandardMaterial({map:stone,roughness:1});
const floorMat=new THREE.MeshStandardMaterial({map:floorTex,roughness:1});

// === I≈ûIK ===
const torch=new THREE.PointLight(0xffa050,2,12);
torch.position.set(0,2,0);
scene.add(torch);
scene.add(new THREE.AmbientLight(0x202010,0.4));

// === DUVARLAR ===
for(let z=0;z<100;z+=4){
  const left=new THREE.Mesh(new THREE.BoxGeometry(4,4,1),wallMat);
  left.position.set(-4,0,-z);
  scene.add(left);
  const right=new THREE.Mesh(new THREE.BoxGeometry(4,4,1),wallMat);
  right.position.set(4,0,-z);
  scene.add(right);
  const floor=new THREE.Mesh(new THREE.BoxGeometry(8,0.2,4),floorMat);
  floor.position.set(0,-2,-z);
  scene.add(floor);
}

// === YOL AYRIMI ===
const rightLight=new THREE.PointLight(0xff8020,3,8);
rightLight.position.set(6,2,-90);
scene.add(rightLight);
const leftLight=new THREE.PointLight(0x80c0ff,3,8);
leftLight.position.set(-6,2,-90);
scene.add(leftLight);

// === KAMERA ===
camera.position.set(0,1,5);

// === ALTYAZILAR ===
const subs=[
  "Adƒ±mlarƒ±n yankƒ±lanƒ±yor...",
  "Hava aƒüƒ±r, duvarlar daha soƒüuk.",
  "Burasƒ±... karar yerin."
];
const subtitle=document.getElementById("subtitle");
const fadeWhite=document.getElementById("fadeWhite");
const choices=document.getElementById("choices");

let idx=0;
function showNext(){
  if(idx<subs.length){
    subtitle.textContent=subs[idx];
    subtitle.style.opacity=1;
    setTimeout(()=>{subtitle.style.opacity=0;idx++;setTimeout(showNext,1800);},3500);
  } else {
    choices.style.opacity=1;
  }
}
setTimeout(showNext,2000);

// === HAREKET ===
let t=0, direction="forward", turning=false;
function animate(){
  requestAnimationFrame(animate);
  t+=0.015;

  torch.intensity=2+Math.sin(t*5)*0.3;
  torch.position.z=camera.position.z-1;

  if(direction==="forward" && !turning && camera.position.z>-80)
    camera.position.z-=0.05;

  if(turning){
    camera.rotation.y+=direction==="right"?-0.02:0.02;
    camera.position.z-=0.15;
    if(Math.abs(camera.rotation.y) > Math.PI/2){
      fadeWhite.style.opacity=1;
      setTimeout(()=>window.location.href="labirent-03.html",3000);
    }
  }

  renderer.render(scene,camera);
}
animate();

// === SE√áƒ∞MLER ===
document.getElementById("rightBtn").addEventListener("click",()=>{
  direction="right";
  turning=true;
  choices.style.opacity=0;
  subtitle.textContent="I≈üƒ±k seni √ßaƒüƒ±rƒ±yor...";
  subtitle.style.opacity=1;
});
document.getElementById("leftBtn").addEventListener("click",()=>{
  direction="left";
  turning=true;
  choices.style.opacity=0;
  subtitle.textContent="Sis i√ßine karƒ±≈üƒ±yor...";
  subtitle.style.opacity=1;
});

addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
