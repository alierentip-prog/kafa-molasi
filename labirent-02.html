<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bilinçaltı: 2. Perde</title>
<style>
html, body {
  margin: 0;
  height: 100%;
  overflow: hidden;
  background: #000;
  font-family: "Poppins", sans-serif;
}
#overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  color: #f2ece6;
  z-index: 5;
  text-shadow: 0 0 15px rgba(255,255,255,0.2);
  pointer-events: none;
  transition: opacity 2s ease;
}
#overlay h1 {
  font-size: 1.5rem;
  opacity: 0;
  text-align: center;
  transition: opacity 2s ease;
  max-width: 80%;
}
#overlay button {
  pointer-events: all;
  opacity: 0;
  margin-top: 30px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.3);
  padding: 10px 25px;
  border-radius: 25px;
  color: #f3efe9;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
}
#overlay button:hover {
  background: rgba(255,255,255,0.18);
}
</style>
</head>
<body>

<div id="overlay">
  <h1>Duvarlarda yankılanan sesleri duyabiliyor musun?..</h1>
  <button id="nextBtn">Devam Et</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>
// === SAHNE VE KAMERA ===
const scene = new THREE.Scene();
scene.fog = new THREE.FogExp2(0x000000, 0.03);
const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

// === IŞIKLAR ===
const ambient = new THREE.AmbientLight(0x555555);
scene.add(ambient);

const torch = new THREE.PointLight(0xffaa44, 2, 15);
torch.position.set(0,3,2);
scene.add(torch);

// === TOZ PARTİKÜLLERİ ===
const particleGroup = new THREE.Group();
const particleGeo = new THREE.SphereGeometry(0.03,6,6);
for(let i=0;i<500;i++){
  const mat = new THREE.MeshBasicMaterial({color:0xffffff, transparent:true, opacity:Math.random()*0.3});
  const p = new THREE.Mesh(particleGeo, mat);
  p.position.set((Math.random()-0.5)*20, Math.random()*8, (Math.random()-0.5)*20);
  particleGroup.add(p);
}
scene.add(particleGroup);

// === TÜNEL YAPISI ===
const tunnelMat = new THREE.MeshStandardMaterial({color:0x111111, roughness:0.9, metalness:0.2});
const tunnelGeo = new THREE.CylinderGeometry(6,6,50,32,true);
const tunnel = new THREE.Mesh(tunnelGeo, tunnelMat);
tunnel.rotation.z = Math.PI/2;
scene.add(tunnel);

// === DUVAR YAZILARI (ışıklı) ===
const loader = new THREE.TextureLoader();
const canvasTxt = document.createElement('canvas');
const ctx = canvasTxt.getContext('2d');
canvasTxt.width = 1024; canvasTxt.height = 256;
ctx.fillStyle = "black"; ctx.fillRect(0,0,1024,256);
ctx.font = "60px Poppins";
ctx.fillStyle = "rgba(255,255,255,0.9)";
ctx.fillText("KENDİNDEN KAÇMA", 180,150);
const textTex = new THREE.CanvasTexture(canvasTxt);
const textMat = new THREE.MeshBasicMaterial({map:textTex, transparent:true});
const textPlane = new THREE.Mesh(new THREE.PlaneGeometry(12,3), textMat);
textPlane.position.set(0,2,-6);
scene.add(textPlane);

// === KAMERA POZİSYONU ===
camera.position.set(-18,2,0);
let time = 0;

// === ANİMASYON ===
function animate(){
  time += 0.005;
  // Tünel dönüşü
  tunnel.rotation.y += 0.001;
  torch.intensity = 1.5 + Math.sin(time*15)*0.3;

  // Toz partikülleri dalgalansın
  particleGroup.children.forEach(p=>{
    p.position.y += Math.sin(p.position.x*0.5 + time)*0.005;
    if(p.position.y>8)p.position.y=0;
  });

  // Kamera hareketi (ilerleme)
  camera.position.x += 0.02;
  camera.lookAt(0,2,0);

  renderer.render(scene,camera);
  requestAnimationFrame(animate);
}
animate();

// === PERDE YAZILARI ===
const overlay = document.getElementById('overlay');
const h1 = overlay.querySelector('h1');
const btn = document.getElementById('nextBtn');
setTimeout(()=>h1.style.opacity=1,1000);
setTimeout(()=>btn.style.opacity=1,4000);

let stage = 1;
btn.addEventListener('click', ()=>{
  stage++;
  h1.style.opacity = 0;
  btn.style.opacity = 0;
  setTimeout(()=>{
    if(stage===2){
      h1.textContent = "Her şey tanıdık geliyor, değil mi?";
    } else if(stage===3){
      h1.textContent = "Bu tünelin sonu, kendi başlangıcın.";
    } else {
      h1.textContent = "Sessizlik yankılanıyor... perde kapanıyor.";
    }
    h1.style.opacity = 1;
    if(stage<4) btn.style.opacity = 1;
  },2000);
});

window.addEventListener('resize', ()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});
</script>
</body>
</html>
