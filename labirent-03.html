<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Labirent 03 | Bilinç Odası – Duvar Yazıları</title>
<style>
html,body{margin:0;height:100%;overflow:hidden;background:black;}
#subtitle{
  position:absolute;bottom:8%;width:100%;text-align:center;
  color:#f3e8d8;font-family:"Poppins",sans-serif;
  font-size:1.2rem;opacity:0;transition:opacity 2s ease;
  text-shadow:0 0 25px rgba(255,200,120,0.8);
}
</style>
</head>
<body>
<div id="subtitle"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/loaders/FontLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/geometries/TextGeometry.js"></script>

<script>
// === SAHNE ===
const scene=new THREE.Scene();
scene.fog=new THREE.FogExp2(0x000000,0.045);
const camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,0.1,1000);
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

// === IŞIKLAR ===
const torch=new THREE.PointLight(0xffa050,2.5,15);
torch.position.set(0,2,0);
scene.add(torch);
scene.add(new THREE.AmbientLight(0x303010,0.5));

// === DOKULAR ===
const loader=new THREE.TextureLoader();
const wallTex=loader.load("https://i.imgur.com/X7WJ5dq.jpeg");
wallTex.wrapS=wallTex.wrapT=THREE.RepeatWrapping;
const floorTex=loader.load("https://i.imgur.com/aBkx8qM.jpeg");
floorTex.wrapS=floorTex.wrapT=THREE.RepeatWrapping;
floorTex.repeat.set(3,3);
const wallMat=new THREE.MeshStandardMaterial({map:wallTex,roughness:1});
const floorMat=new THREE.MeshStandardMaterial({map:floorTex,roughness:0.8});

// === DUVARLAR VE ZEMİN ===
for(let z=0;z<60;z+=4){
  const left=new THREE.Mesh(new THREE.BoxGeometry(4,4,1),wallMat);
  left.position.set(-4,0,-z);
  scene.add(left);
  const right=new THREE.Mesh(new THREE.BoxGeometry(4,4,1),wallMat);
  right.position.set(4,0,-z);
  scene.add(right);
  const floor=new THREE.Mesh(new THREE.BoxGeometry(8,0.2,4),floorMat);
  floor.position.set(0,-2,-z);
  scene.add(floor);
}

// === MASA ===
const table=new THREE.Mesh(
  new THREE.BoxGeometry(3,0.5,2),
  new THREE.MeshStandardMaterial({color:0x3c2f23,roughness:1})
);
table.position.set(0,-1,-55);
scene.add(table);

// === TÜRKÇE DUVAR YAZILARI ===
const fontLoader=new THREE.FontLoader();
fontLoader.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",(font)=>{
  const yazilar=[
    {yazi:"AKLINI KAYBETME",x:-3.5,y:1.2,z:-10},
    {yazi:"GERİ DÖNME",x:2.0,y:-0.5,z:-20},
    {yazi:"IŞIĞI TAKİP ET",x:-3.2,y:0.8,z:-30},
    {yazi:"BİLİNÇ KAPISI",x:1.8,y:1.5,z:-40},
    {yazi:"SEN BURADASIN",x:-3.4,y:0.2,z:-50}
  ];
  yazilar.forEach(obj=>{
    const geo=new THREE.TextGeometry(obj.yazi,{
      font:font,size:0.5,height:0.1,curveSegments:8,
    });
    const mat=new THREE.MeshStandardMaterial({
      color:0xffcc77,emissive:0xff9933,emissiveIntensity:0.6
    });
    const mesh=new THREE.Mesh(geo,mat);
    mesh.position.set(obj.x,obj.y,obj.z);
    mesh.rotation.y=obj.x>0?Math.PI/2:-Math.PI/2;
    scene.add(mesh);
  });
});

// === YAZI AKIŞI ===
const subtitles=[
  "Duvarlardaki kelimeler birbiriyle konuşuyor gibi...",
  "Bazı harfler ışıkla titriyor, bazıları kayboluyor.",
  "Küplerin üstündeki yazılar sanki seni tanıyor."
];
const subtitle=document.getElementById("subtitle");
let idx=0;
function nextSub(){
  if(idx<subtitles.length){
    subtitle.textContent=subtitles[idx];
    subtitle.style.opacity=1;
    setTimeout(()=>{subtitle.style.opacity=0;idx++;setTimeout(nextSub,2500);},4000);
  }
}
setTimeout(nextSub,2000);

// === KAMERA ===
camera.position.set(0,1,5);
let t=0;
function animate(){
  requestAnimationFrame(animate);
  t+=0.015;
  torch.position.z=camera.position.z-1;
  if(camera.position.z>-50) camera.position.z-=0.05;
  torch.intensity=2.5+Math.sin(t*8)*0.4;
  renderer.render(scene,camera);
}
animate();

addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
