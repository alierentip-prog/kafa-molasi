<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Labirent 03 | Bilincin Yankısı</title>
<style>
html,body{margin:0;height:100%;overflow:hidden;background:black;}
#subtitle{
  position:absolute;bottom:8%;width:100%;text-align:center;
  color:#f3e8d8;font-family:"Poppins",sans-serif;
  font-size:1.2rem;opacity:0;transition:opacity 2s ease;
  text-shadow:0 0 20px rgba(255,200,120,0.8);
}
</style>
</head>
<body>
<div id="subtitle"></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/loaders/FontLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/geometries/TextGeometry.js"></script>

<script>
// === SAHNE ===
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x000000);
scene.fog = new THREE.FogExp2(0x000000,0.05);

const camera = new THREE.PerspectiveCamera(70,innerWidth/innerHeight,0.1,1000);
camera.position.set(0,1,10);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

// === IŞIK ===
const ambient = new THREE.AmbientLight(0x404020,1.2);
scene.add(ambient);
const torch = new THREE.PointLight(0xffaa66,2,30);
torch.position.set(0,3,10);
scene.add(torch);

// === MALZEMELER ===
const wallMat = new THREE.MeshStandardMaterial({color:0x222222,metalness:0.2,roughness:0.9});
const floorMat = new THREE.MeshStandardMaterial({color:0x111111,metalness:0.1,roughness:1});

// === TÜNEL ===
for(let z=0;z<100;z+=5){
  let left=new THREE.Mesh(new THREE.BoxGeometry(1,6,5),wallMat);
  left.position.set(-3,0,-z);
  scene.add(left);

  let right=new THREE.Mesh(new THREE.BoxGeometry(1,6,5),wallMat);
  right.position.set(3,0,-z);
  scene.add(right);

  let floor=new THREE.Mesh(new THREE.BoxGeometry(6,0.2,5),floorMat);
  floor.position.set(0,-3,-z);
  scene.add(floor);

  let ceiling=new THREE.Mesh(new THREE.BoxGeometry(6,0.2,5),floorMat);
  ceiling.position.set(0,3,-z);
  scene.add(ceiling);
}

// === DUVAR YAZILARI ===
const fontLoader = new THREE.FontLoader();
fontLoader.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json", font => {
  const yazilar = [
    {yazi:"AKLINI KAYBETME",x:-2.5,y:1,z:-10},
    {yazi:"GERİ DÖNME",x:1.8,y:0,z:-25},
    {yazi:"IŞIĞI TAKİP ET",x:-2.5,y:1,z:-40},
    {yazi:"BİLİNÇ KAPISI",x:2.2,y:1,z:-55},
    {yazi:"SEN BURADASIN",x:-2.3,y:0,z:-70}
  ];
  yazilar.forEach(obj=>{
    const geo = new THREE.TextGeometry(obj.yazi,{font:font,size:0.6,height:0.05});
    const mat = new THREE.MeshStandardMaterial({color:0xffcc77,emissive:0xffa040,emissiveIntensity:0.6});
    const mesh = new THREE.Mesh(geo,mat);
    mesh.position.set(obj.x,obj.y,obj.z);
    mesh.rotation.y = obj.x>0?Math.PI/2:-Math.PI/2;
    scene.add(mesh);
  });
});

// === ALTYAZI ===
const subtitles = [
  "Duvarlar nemli, kelimeler titreşiyor...",
  "Bazı harfler sanki nefes alıyor.",
  "Işığa doğru gitmelisin."
];
const subtitle = document.getElementById("subtitle");
let i=0;
function nextSub(){
  if(i<subtitles.length){
    subtitle.textContent=subtitles[i];
    subtitle.style.opacity=1;
    setTimeout(()=>{subtitle.style.opacity=0;i++;setTimeout(nextSub,2500);},4000);
  }
}
setTimeout(nextSub,2000);

// === ANİMASYON ===
function animate(){
  requestAnimationFrame(animate);
  camera.position.z -= 0.05; // yavaş ilerleme
  torch.position.z = camera.position.z - 1;
  renderer.render(scene,camera);
}
animate();

// === RESIZE ===
addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
