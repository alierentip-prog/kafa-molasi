<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Labirent 05 | Bilinç Kapısı</title>
<style>
html,body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  background: radial-gradient(circle at center, #070707 0%, #000 100%);
  color: #f3e9d2;
  font-family: "Poppins", sans-serif;
}
canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: 1;
}
#overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.7);
  z-index: 2;
  pointer-events: none;
}
#text {
  position: absolute;
  bottom: 12%;
  width: 100%;
  text-align: center;
  font-size: 1.3rem;
  opacity: 0;
  transition: opacity 2.5s ease;
  text-shadow: 0 0 20px rgba(255,140,0,0.7);
  z-index: 3;
}
.fade-in {
  opacity: 1 !important;
}
.particle {
  position: absolute;
  background: rgba(255,200,150,0.8);
  border-radius: 50%;
  pointer-events: none;
  z-index: 1;
  animation: drift 12s linear infinite;
}
@keyframes drift {
  from { transform: translateY(100vh) scale(1); opacity: 0.8; }
  to { transform: translateY(-20vh) scale(0.2); opacity: 0; }
}
#door {
  position: absolute;
  width: 160px;
  height: 260px;
  background: linear-gradient(90deg, #3b2f1e, #5a4328, #3b2f1e);
  border: 3px solid #20150b;
  border-radius: 4px;
  box-shadow: 0 0 40px rgba(255,165,0,0.4);
  top: 30%;
  left: calc(50% - 80px);
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 3s ease, transform 4s ease;
  z-index: 4;
}
#door::before {
  content: '';
  position: absolute;
  top: 45%;
  left: 15%;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: radial-gradient(circle, #caa965, #5c4a20);
  box-shadow: inset 0 0 4px #000;
}
#door.open {
  transform: scale(1.15);
  opacity: 1;
  box-shadow: 0 0 80px rgba(255,255,255,0.9);
}
#whiteout {
  position: absolute;
  width: 100%;
  height: 100%;
  background: white;
  top: 0;
  left: 0;
  opacity: 0;
  z-index: 10;
  transition: opacity 4s ease;
}
</style>
</head>
<body>
<canvas id="lab"></canvas>
<div id="overlay"></div>
<div id="text"></div>
<div id="door"></div>
<div id="whiteout"></div>

<script>
// === Parçacıklar (toz efekti) ===
for(let i=0; i<80; i++){
  const p = document.createElement("div");
  p.classList.add("particle");
  const size = Math.random()*3+1;
  p.style.width = `${size}px`;
  p.style.height = `${size}px`;
  p.style.left = `${Math.random()*100}%`;
  p.style.top = `${Math.random()*100}%`;
  p.style.animationDuration = `${8+Math.random()*8}s`;
  document.body.appendChild(p);
}

// === 3D labirent duvar efekti ===
const canvas = document.getElementById("lab");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;
let t = 0;
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=0; i<180; i++){
    let z = (i+t) % 180;
    let depth = 500/(z+5);
    let x = Math.sin((i+t)/15)*depth + canvas.width/2;
    let y = Math.cos((i+t)/15)*depth + canvas.height/2;
    ctx.strokeStyle = `rgba(${200+Math.sin(t/20)*55},${120},40,${0.4+Math.sin(i/10)*0.3})`;
    ctx.lineWidth = 1;
    ctx.strokeRect(x-30*depth/500, y-30*depth/500, 60*depth/500, 60*depth/500);
  }
  t += 0.6;
  requestAnimationFrame(draw);
}
draw();

// === Altyazılar sırasıyla ===
const texts = [
  "Duvardaki semboller... bir şey fısıldıyor.",
  "Zaman burada bükülüyor gibi.",
  "Her adımda yankılanan kalp sesin...",
  "Bir kapı var... ama nereye açılıyor?",
  "Korkma. Sadece hatırla."
];
let index = 0;
const txt = document.getElementById("text");
const door = document.getElementById("door");
const whiteout = document.getElementById("whiteout");

function nextText(){
  if(index < texts.length){
    txt.textContent = texts[index];
    txt.classList.add("fade-in");
    setTimeout(()=>{
      txt.classList.remove("fade-in");
      index++;
      setTimeout(nextText, 4000);
    }, 3000);
  } else {
    // Kapı beliriyor
    door.style.opacity = "1";
    setTimeout(()=>door.classList.add("open"), 2000);
    setTimeout(()=>{
      txt.textContent = "Kapı açıldı...";
      txt.classList.add("fade-in");
      setTimeout(()=>{
        whiteout.style.opacity = 1;
        setTimeout(()=>window.location.href="labirent06.html", 4500);
      }, 3500);
    }, 5000);
  }
}
setTimeout(nextText, 2000);
</script>
</body>
</html>
