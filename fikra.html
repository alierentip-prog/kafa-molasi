<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>FÄ±kra Makinesi</title>
<style>
  :root{
    --text:#111827;--muted:#6b7280;--border:#e5e7eb;--accent:#2563eb;
    --surface:#ffffff;--bg:#fafafa;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial}
  .wrap{max-width:900px;margin:24px auto;padding:16px}
  .top{display:flex;align-items:center;gap:10px;margin-bottom:8px}
  a.back{color:var(--accent);text-decoration:none;font-weight:600}
  h1{margin:0;font-size:26px}
  .card{background:var(--surface);border:1px solid var(--border);border-radius:16px;box-shadow:0 8px 20px rgba(0,0,0,.04);padding:16px}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:10px 0 14px}
  select,button{
    border:1px solid var(--border);background:#fff;color:var(--text);
    padding:10px 12px;border-radius:12px;font-size:14px
  }
  button.primary{background:var(--accent);color:#fff;border-color:var(--accent)}
  .joke{background:#fff;border:1px solid var(--border);border-radius:14px;padding:14px;min-height:90px}
  .meta{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:13px;margin-bottom:6px}
  .favorite{margin-left:auto;cursor:pointer;color:#f59e0b}
  .list{margin-top:16px}
  .item{border-top:1px dashed var(--border);padding-top:10px;margin-top:10px}
</style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <a class="back" href="sakamatik.html">â† Åakamatikler</a>
    <h1>ğŸ“– FÄ±kra Makinesi</h1>
  </div>
  <div class="card">
    <p style="margin:4px 0 10px;color:#374151">Kategoriyi seÃ§, â€œFÄ±kra getirâ€e bas. BeÄŸendiÄŸini â­ ile kaydet; aÅŸaÄŸÄ±da Favorilerâ€™de dursun.</p>
    <div class="row">
      <select id="cat">
        <option value="hepsi">TÃ¼mÃ¼</option>
        <option value="klasik">Klasik</option>
        <option value="guncel">GÃ¼ncel</option>
        <option value="tip">TÄ±p</option>
        <option value="zeka">Zekice</option>
        <option value="sacma">AbsÃ¼rt</option>
      </select>
      <button class="primary" id="get">FÄ±kra getir</button>
      <button id="clearFav">Favorileri temizle</button>
    </div>

    <div class="joke" id="jokeBox">
      <div class="meta"><span id="catName">Kategori: -</span><span class="favorite" id="favBtn" title="Favoriye ekle">â­</span></div>
      <div id="jokeText">HazÄ±r olduÄŸunda getiriyorumâ€¦</div>
    </div>

    <div class="list" id="favList"></div>
  </div>
</div>

<script>
const data = [
  {cat:"klasik", text:"Garson: â€˜YemeÄŸiniz nasÄ±l efendim?â€™â€”MÃ¼ÅŸteri: â€˜Bedava olsa on numara!â€™"},
  {cat:"klasik", text:"Ã–ÄŸretmen: â€˜En hÄ±zlÄ± ÅŸey nedir?â€™â€”Ã–ÄŸrenci: â€˜TeneffÃ¼s hocam. Gelir gelmez biter.â€™"},
  {cat:"guncel", text:"ArkadaÅŸ: â€˜Diyete baÅŸladÄ±m.â€™â€”DiÄŸeri: â€˜HayÄ±rlÄ± olsun, kaÃ§ saatlik?â€™"},
  {cat:"guncel", text:"Uygulama: â€˜Kabul ediyor musun?â€™â€”Ben: â€˜KoÅŸulsuz ÅŸartsÄ±z mutluluk varsa, kabul.â€™"},
  {cat:"tip", text:"Stajyer: â€˜Ä°nsanlarÄ± yaÅŸatacaÄŸÄ±m.â€™â€”Gece 04:00: â€˜Ã–nce kendimi yaÅŸatabilir miyim?â€™"},
  {cat:"tip", text:"Hoca: â€˜Sorusu olan?â€™â€”Ä°Ã§ sesler: â€˜SorularÄ±mÄ±z hayatla ilgili hocamâ€¦â€™"},
  {cat:"zeka", text:"MatematikÃ§i: â€˜Ä°liÅŸkiler beni yormuyor; sadece deÄŸiÅŸken sayÄ±sÄ± fazla.â€™"},
  {cat:"zeka", text:"SatranÃ§Ã§Ä±: â€˜BilgisayarÄ± yendimâ€¦â€™â€”â€˜FiÅŸi Ã§ekmiÅŸsin kanka.â€™"},
  {cat:"sacma", text:"Dolap kapaÄŸÄ±nÄ± yavaÅŸ kapatÄ±rÄ±z; iÃ§erdeki makarna uyandÄ±rÄ±lmasÄ±n diye."},
  {cat:"sacma", text:"Telefonu ÅŸarja koyup yanÄ±na uzansak biz de dolar mÄ±yÄ±z azÄ±cÄ±k?"}
];

const catEl = document.getElementById('cat');
const jokeBox = document.getElementById('jokeBox');
const jokeText = document.getElementById('jokeText');
const catName = document.getElementById('catName');
const favBtn = document.getElementById('favBtn');
const favList = document.getElementById('favList');

let current = null;

function pick(){
  const cat = catEl.value;
  const pool = cat === 'hepsi' ? data : data.filter(d=>d.cat===cat);
  if(!pool.length){ current=null; jokeText.textContent="Bu kategori boÅŸ gÃ¶rÃ¼nÃ¼yor."; catName.textContent="Kategori: -"; return; }
  current = pool[Math.floor(Math.random()*pool.length)];
  jokeText.textContent = current.text;
  catName.textContent = "Kategori: " + current.cat.toUpperCase();
}

document.getElementById('get').onclick = pick;

function renderFav(){
  const favs = JSON.parse(localStorage.getItem('favs')||'[]');
  favList.innerHTML = "<h3 style='margin:8px 0'>â­ Favoriler</h3>" + (favs.length? "" : "<div style='color:#6b7280'>HenÃ¼z yok.</div>");
  favs.forEach((t,i)=>{
    const div = document.createElement('div');
    div.className='item';
    div.innerHTML = `<div style="display:flex;gap:8px;align-items:center">
      <span style="font-size:13px;color:#6b7280">#${i+1}</span>
      <span>${t}</span>
      <button style="margin-left:auto" data-i="${i}">Sil</button>
    </div>`;
    favList.appendChild(div);
  });
  favList.querySelectorAll('button').forEach(b=>{
    b.onclick = e=>{
      const i = +e.target.dataset.i;
      const arr = JSON.parse(localStorage.getItem('favs')||'[]');
      arr.splice(i,1);
      localStorage.setItem('favs', JSON.stringify(arr));
      renderFav();
    };
  });
}

favBtn.onclick = ()=>{
  if(!current) return;
  const arr = JSON.parse(localStorage.getItem('favs')||'[]');
  arr.unshift(current.text);
  localStorage.setItem('favs', JSON.stringify(arr));
  renderFav();
};

document.getElementById('clearFav').onclick = ()=>{
  localStorage.removeItem('favs'); renderFav();
};

pick(); renderFav();
</script>
</body>
</html>
